# Daily Fitness API
> Данный проект представляет собой REST API сервис для отслеживания дневной нормы калорий пользователя и учета съеденных блюд

> [!NOTE]  
> Проект создан в рамках тестового задания, и не является коммерческим

## Суточная норма калорий
На основе данных пользователя, а именно `Возраст`, `Вес`, `Рост`, `Пол`, `Активность` вычисляется индивидуальная суточная норма калорий.

Вычисление строится по формуле `Харриса-Бенедикта`, конкретная формула зависит от пола:

Для мужчин: $`ПБМ = 88,36 + (13,4 × вес в кг) + (4,8 × рост в см) – (5,7 × возраст в годах)`$

Для женщин: $`ПБМ = 447,6 + (9,2 × вес в кг) + (3,1 × рост в см) – (4,3 × возраст в годах)`$

Далее $`ПБМ`$ умножается на коэфициент, который зависит от ежедневной активности:

- Нет активности: $`ПБМ = ПБМ * 1.2`$
- Минимальная активность: $`ПБМ = ПБМ * 1.375`$
- Средняя активность: $`ПБМ = ПБМ * 1.55`$
- Высокая активность: $`ПБМ = ПБМ * 1.725`$
- Очень высокая (экстремальная) активность: $`ПБМ = ПБМ * 1.9`$

В зависимости от выбранной цели, пользователь должен соблюдать соответствующие неравенства потребляемого им калоража и его нормы:

- Набор веса: `суточное потребление пищи в калориях` > `суточной нормы`
- Поддержание веса: `суточное потребление пищи в калориях` ~ `суточной нормы`
- Сброс веса: `суточное потребление пищи в калориях` < `суточной нормы`


## База данных
В качестве базы данных используется `PostgreSQL 17`

Схема базы данных представлена на рисунке ниже

<br>![screenshot](images/db-schema.png)

## Тестовые данные
### Пользователи
| Имя   | Почта          | Пароль | Пол     | Возраст | Вес | Рост | Суточная норма калорий | Цель       | Активность  | Роль          |
|-------|----------------|--------|---------|---------|-----|------|------------------------|------------|-------------|---------------|
| admin | admin@mail.org | admin  | Мужской | 20      | 65  | 186  | 2100                   | Набор веса | Отсутствует | Администратор |
| puffy | puffy@mail.org | puffy  | Мужской | 25      | 90  | 175  | 2700                   | Сброс веса | Минимальная | Пользователь  |
| stacy | stacy@mail.org | stacy  | Женский | 24      | 50  | 165  | 2000                   | Набор веса | Средняя     | Пользователь  |
### Блюда
### Приемы пищи
## Авторизация
- Чтобы авторизовать пользователя в системе необходимо использовать эндпоинты `/account/register` для регистрации и `/account/login` для авторизации
- В ответном сообщении будет находится `JWT-токен`, который используется для доступа ко всем ресурсам

<br>![screenshot](images/swagger-ui-auth.png)
## Swagger UI
- Чтобы корректно использовать API сервиса используйте `Swagger UI`, настроенный для него
- UI расположен по адресу `http://localhost:9000/api/swagger-ui`
- Все эндпоинты и схема данных документированы. Подробно описаны серверные ответы и обработчики исключений

<br>![screenshot](images/swagger-ui.png)
## Инструкция к запуску

1. Установите Docker Desktop на свой ПК (для daemon-а) https://docs.docker.com/desktop/setup/install/windows-install/
2. Установите и запустите `git bash`
3. Клонируйте репозиторий в желаемую папку

```shell
git clone https://github.com/duahifnv/daily-fitness-api.git
cd daily-fitness-api
```

4. Проверьте, что docker daemon запущен

```shell
docker --version
```

5. Запустите скрипт для локального деплоя приложения

>Запуск займет некоторое время, т.к. будут подгружаться необходимые образы
```shell
sh run.sh
```

> [!NOTE]  
> Скрипт должен автоматически запустить браузер по адресу `http://localhost:9000/api/swagger-ui`, само API находится по адресу `http://localhost:9000/api`
